
<html>

<body>
</body>
</html>

<script>

// function to create array buffer
function createBuffer(data) {
  data = data instanceof Float32Array ? data : new Float32Array(data);
  var buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER,buffer);
  gl.bufferData(gl.ARRAY_BUFFER,data,gl.STATIC_DRAW);
  return buffer;
}

// generic function to create shaders
function createShader(gl, source, type){
 var shader = gl.createShader(type);
 gl.shaderSource(shader, source);
 gl.compileShader(shader);
   if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
	console.error('ERROR compiling shader type=>'+ type, gl.getShaderInfoLog(shader));
	return;
  }
return shader
}

// function that returns a `program` from compiled vertex & fragment shaders
function createProgram(gl, vertexShader, fragmentShader) {
  var program = gl.createProgram();
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);
  gl.linkProgram(program);
  var success = gl.getProgramParameter(program, gl.LINK_STATUS);
  if (!success) {
	  // something went wrong with the link
	  throw ("program filed to link:" + gl.getProgramInfoLog (program));
  }
  return program;
};


//user program
const vs_source = `

	attribute  vec2 aPosition;
	attribute vec4 aColor;
	varying vec4 vColor;
	void main(){
		gl_Position = vec4(aPosition, 0.0, 1.0);
		vColor = aColor;
		
	}
	
`;

const fs_source = `

	precision mediump float;
	varying vec4 vColor;
	void main(){
		gl_FragColor = vColor;
		
	}

`;


var canvas = document.createElement('canvas')
canvas.width = window.innerWidth
canvas.height = window.innerHeight
document.body.appendChild(canvas)


var gl = canvas.getContext('webgl')
//  clear canvas with any color you want
gl.clearColor(0.75, 0.85, 0.8, 1.0)
gl.clear(gl.COLOR_BUFFER_BIT)


//create vertex shader
var vertexShader = createShader(gl, vs_source, gl.VERTEX_SHADER);

//create fragment shader
var fragShader = createShader(gl, fs_source, gl.FRAGMENT_SHADER);

//create program
var program = createProgram(gl,vertexShader, fragShader);


aPosition = gl.getAttribLocation(program,"aPosition");
aColor = gl.getAttribLocation(program,"aColor");

// all info bout position /color/ texture coordiates.. etc is kept into a single array for better performance
var buffer = createBuffer([
  // X  Y     //RGBA
   0.5, 0.5,  1.0,0.0,0.0,1.0,
  -0.5, 0.5,  0.0,1.0,0.0,1.0,
   0.5,-0.5,  0.0,0.0,1.0,1.0,
   
   0.5,-0.5,  1.0,0.0,0.0,1.0,
  -0.5, 0.5,  1.0,1.0,0.0,1.0,
  -0.5,-0.5,  0.0,1.0,1.0,1.0,
]);

	// Setup GL State
	gl.useProgram(program); 

	gl.bindBuffer(gl.ARRAY_BUFFER,buffer);
	
	// Every 24 bytes, use the first eight( i.e 2 components in array)(4 bytes is a float) for the 'aPosition' attribute
	gl.vertexAttribPointer(aPosition,2,gl.FLOAT,gl.FALSE,24,0);
	gl.vertexAttribPointer(aColor,4,gl.FLOAT,gl.FALSE,24,8);

	
	
	gl.enableVertexAttribArray(aPosition);
	gl.enableVertexAttribArray(aColor);

	
	
	gl.clearColor(0.5,0.5,0.5,1.0);
	gl.clear(gl.COLOR_BUFFER_BIT);
	gl.drawArrays(gl.TRIANGLES,0,6);

</script>
